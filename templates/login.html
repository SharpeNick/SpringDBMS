{% extends "base.html" %}

{% block content %}
    <div style="max-width: 400px; margin: auto; background-color: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);">
        <h1 style="text-align: center;">Login</h1>
        <form id="loginForm">
            {{form.hidden_tag()}}
            {{form.email.label}}
            {{form.email()}}
            <br>
            {{form.password.label}}
            {{form.password()}}
            <br>
            {{form.submit}}
        </form>
    </div>
{% endblock %}

{% block scripts %}
    <script>
        document.getElementById("loginForm").addEventListener("submit", function(event) {
            event.preventDefault();
            var username = document.getElementById("username").value;
            var password = document.getElementById("password").value;
            
            // Example: Send login information to backend for processing
            // Replace this with your actual backend endpoint
            fetch("/login_user", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    username: username,
                    password: password
                })
            })
            .then(response => {
                if (response.ok) {
                    alert("Login successful!");
                    window.location.href = "/"; // Redirect to home page after successful login
                } else {
                    alert("Login failed. Please check your username and password.");
                }
            })
            .catch(error => {
                console.error("Error logging in:", error);
                alert("An error occurred while logging in. Please try again later.");
            });
        });
    </script>
{% endblock %}
