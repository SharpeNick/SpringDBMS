{% extends "base.html" %}

{% block content %}
    <div style="max-width: 400px; margin: auto; background-color: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);">
        <h1 style="text-align: center;">Register</h1>
        <p style="text-align: center;">Already have an account? Click <a href="/login">here</a> to login.</p>
        <p style="text-align: center;">Important user information...</p>
        <form id="registerForm">
            <label for="username">Username:</label>
        <input type="text" id="username" name="username" required><br><br>
        
        <label for="password">Password:</label>
        <input type="password" id="password" name="password" required><br><br>
        
        <label for="fname">First Name:</label>
        <input type="text" id="fname" name="fname" required><br><br>
        
        <label for="lname">Last Name:</label>
        <input type="text" id="lname" name="lname" required><br><br>
        
        <label for="insuranceName">Insurance Name:</label>
        <input type="text" id="insuranceName" name="insuranceName" required><br><br>
        
        <label for="covered">Insured:</label>
        <input type="checkbox" id="covered" name="covered"><br><br>
        
        <label for="policyNumber">Insurance Policy Number:</label>
        <input type="text" id="policyNumber" name="policyNumber" required><br><br>
        
        <label for="deductible">Deductible:</label>
        <input type="number" id="deductible" name="deductible" required><br><br>
        
        <label for="phone">Phone Number:</label>
        <input type="tel" id="phone" name="phone" required><br><br>
        
        <label for="address">Address:</label>
        <input type="text" id="address" name="address"><br><br>
        
        <label for="econtactName">Emergency Contact Name:</label>
        <input type="text" id="econtactName" name="econtactName" required><br><br>
        
        <label for="econtactPhone">Emergency Contact Phone:</label>
        <input type="tel" id="econtactPhone" name="econtactPhone" required><br><br>
        
        <input type="submit" value="Register">
            
        </form>
    </div>
{% endblock %}

{% block scripts %}
    <script>
        document.getElementById("registerForm").addEventListener("submit", function(event) {
            event.preventDefault();
            var username = document.getElementById("username").value;
            var password = document.getElementById("password").value;
            
            // Example: Send registration information to backend for processing
            // Replace this with your actual backend endpoint
            fetch("/register_user", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    username: username,
                    password: password
                })
            })
            .then(response => {
                if (response.ok) {
                    alert("Registration successful! Please login.");
                    window.location.href = "/login"; // Redirect to login page after successful registration
                } else {
                    alert("Registration failed. Please try again later.");
                }
            })
            .catch(error => {
                console.error("Error registering user:", error);
                alert("An error occurred while registering. Please try again later.");
            });
        });
    </script>
{% endblock %}
